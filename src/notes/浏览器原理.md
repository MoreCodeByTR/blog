# 浏览器原理
>编辑日期：2022.3.30
>
>参考文献：https://juejin.cn/post/6916157109906341902/
----------
## 1. XSS (cross site scripting) 跨站脚本攻击

是一种代码注入攻击，通过向网站注入恶意脚本，使之在浏览器上运行，从而获取用户信息如cookie、dom、localStorage等；

通过脚本攻击可以进行如下操作：
- 获取用户信息
- DOS（Denial of Server）攻击,占用服务器资源，从而导致用户无法访问服务器
- 破坏页面结构
- 流量劫持（将链接指向某网站）

> 分类：存储型、反射型、DOM型

> 防范：
- 使用服务端渲染，对插入的HTML代码进行转义处理；
- 使用CSP（Content-Security-Policy）建立白名单，告诉浏览器哪些外部资源可以进行下载执行；
https://www.cnblogs.com/kinyoobi/p/15341248.html
- 保护敏感细腻型，比如 `cookie` 使用 `http-only`，使得脚本无法获取。也可以使用验证码，避免脚本伪装成用户执行一些操作。

---------
## 2.CSRF (Cross Site Request Forgery)跨站点请求伪造
攻击者诱导用户进入一个第三方网站，然后该网站向被攻击网站发送跨站请求。如果用户在被攻击网站中保存了登录状态，那么攻击者就可以利用这个登录状态，绕过后台的用户验证，冒充用户向服务器执行一些操作。

CSRF 攻击的本质是利用 cookie 会在同源请求中携带发送给服务器的特点，以此来实现用户的冒充。

> 攻击类型

- GET 类型的 CSRF 攻击，比如在网站中的一个 img 标签里构建一个请求，当用户打开这个网站的时候就会自动发起提交。
- POST 类型的 CSRF 攻击，比如构建一个表单，然后隐藏它，当用户进入页面时，自动提交这个表单。
- 链接类型的 CSRF 攻击，比如在 a 标签的 href 属性里构建一个请求，然后诱导用户去点击。

> 防范：
- 服务器进行同源检查，检查请求头Origin、Referer信息；
- 增加token验证
- cookie设置samesite属性

-----
## 3.网络劫持
>分类
- DNS劫持

DNS强制解析: 通过修改运营商的本地DNS记录，来引导⽤户流量到缓存服务器

302跳转的⽅式: 通过监控⽹络出⼝的流量，分析判断哪些内容是可以进⾏劫持处理的,再对劫持的内存发起302跳转的回复，引导⽤户获取内容
- HTTP劫持

HTTP劫持: (访问⾕歌但是⼀直有贪玩蓝⽉的⼴告),由于http明⽂传输,运营商会修改你的http响应内容(即加⼴告)

>防范：
>
> DNS劫持由于涉嫌违法，已经被监管起来，现在很少会有DNS劫持，⽽http劫持依然⾮常盛⾏，最有效的办法就是全站HTTPS，将HTTP加密，这使得运营商⽆法获取明⽂，就⽆法劫持你的响应内容。
--------
## 4.垃圾回收
- 引用计数（之前）
循环引用时会出现问题
- 标记清除（现在）